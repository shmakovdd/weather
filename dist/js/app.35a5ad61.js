(function(){"use strict";var t={9935:function(t,e,a){var r=a(9242),n=a(3396);const i={class:"app"};function s(t,e,a,r,s,o){const c=(0,n.up)("app-header"),u=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",i,[(0,n.Wm)(c),(0,n.Wm)(u)])}const o={class:"header"};function c(t,e,a,r,i,s){const c=(0,n.up)("app-logo"),u=(0,n.up)("app-nav-bar"),d=(0,n.up)("app-container");return(0,n.wg)(),(0,n.iD)("div",o,[(0,n.Wm)(d,{class:"header__container"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{onClick:e[0]||(e[0]=t=>this.$router.push("/"))}),(0,n.Wm)(u)])),_:1})])}var u=a(6949);const d=t=>((0,n.dD)("data-v-3975ab4f"),t=t(),(0,n.Cn)(),t),l={class:"logo"},p=d((()=>(0,n._)("div",{class:"logo__wrapper"},[(0,n._)("img",{class:"logo__img",src:u,alt:"logo"})],-1))),h=d((()=>(0,n._)("div",{class:"logo__text"},[(0,n._)("h3",null,"AccuVueWeather")],-1))),m=[p,h];function _(t,e,a,r,i,s){return(0,n.wg)(),(0,n.iD)("div",l,m)}var v={},y=a(89);const g=(0,y.Z)(v,[["render",_],["__scopeId","data-v-3975ab4f"]]);var f=g;const w={class:"container"};function C(t,e,a,r,i,s){return(0,n.wg)(),(0,n.iD)("div",w,[(0,n.WI)(t.$slots,"default",{},void 0,!0)])}var D={};const I=(0,y.Z)(D,[["render",C],["__scopeId","data-v-7a6d9db0"]]);var k=I,b=a(7139);const F={class:"navbar"},A=(0,n.Uk)("Список городов"),W={key:1,class:"navbar__favorite__wrapper"},L=(0,n.Uk)(" Избранное "),$=(0,n.Uk)("Войти"),B=(0,n.Uk)("Регистрация"),O=(0,n.Uk)("Выйти");function T(t,e,a,r,i,s){const o=(0,n.up)("app-button"),c=(0,n.up)("app-favorite-hidden");return(0,n.wg)(),(0,n.iD)("div",F,[t.isAuth?((0,n.wg)(),(0,n.j4)(o,{key:0,class:"navbar__btn",onClick:e[0]||(e[0]=t=>this.$router.push("/cities"))},{default:(0,n.w5)((()=>[A])),_:1})):(0,n.kq)("",!0),t.isAuth?((0,n.wg)(),(0,n.iD)("div",W,[(0,n.Wm)(o,{onClick:s.toggleFavActive,class:"navbar__btn"},{default:(0,n.w5)((()=>[L])),_:1},8,["onClick"]),(0,n.Wm)(c,{class:(0,b.C_)([{active:i.isFavActive},"navbar__favorite"])},null,8,["class"])])):(0,n.kq)("",!0),t.isAuth?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(o,{key:2,onClick:e[1]||(e[1]=t=>this.$router.push("/login")),class:"navbar__btn"},{default:(0,n.w5)((()=>[$])),_:1})),t.isAuth?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(o,{key:3,onClick:e[2]||(e[2]=t=>this.$router.push("/reg")),class:"navbar__btn"},{default:(0,n.w5)((()=>[B])),_:1})),t.isAuth?((0,n.wg)(),(0,n.j4)(o,{key:4,onClick:s.logOut,class:"navbar__btn"},{default:(0,n.w5)((()=>[O])),_:1},8,["onClick"])):(0,n.kq)("",!0)])}const z={class:"favorite-hidden"},S={key:0,class:"favorite-hidden__list"},x={key:1,class:"favorite-hidden__plug"};function U(t,e,a,r,i,s){const o=(0,n.up)("favorite-item");return(0,n.wg)(),(0,n.iD)("div",z,[t.favoriteList.length>=1?((0,n.wg)(),(0,n.iD)("ul",S,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.favoriteList,(t=>((0,n.wg)(),(0,n.j4)(o,{key:t.id,city:t,class:"favorite-hidden__item"},null,8,["city"])))),128))])):((0,n.wg)(),(0,n.iD)("div",x,"Нет городов в избранном."))])}var j=a(65);const E={class:"favorite-item"},V=["data-id","data-api_id"],Z=["data-id"];function q(t,e,a,r,i,s){return(0,n.wg)(),(0,n.iD)("li",E,[(0,n._)("div",{onClick:e[0]||(e[0]=(...t)=>s.findCityByID&&s.findCityByID(...t)),"data-id":a.city.id,"data-api_id":a.city.api_city_id,class:"favorite-hidden__city-name"},(0,b.zw)(a.city.name),9,V),(0,n._)("span",{onClick:e[1]||(e[1]=(...e)=>t.deleteCity&&t.deleteCity(...e)),"data-id":a.city.id,class:"favorite-hidden__delete"},"Удалить",8,Z)])}var Q={props:{city:{type:Object,required:!0}},methods:{...(0,j.OI)({setCityID:"current/setCityID"}),...(0,j.nv)({deleteCity:"favorite/deleteCity",getCurrentWeatherById:"current/getCurrentWeatherById"}),findCityByID(t){this.getCurrentWeatherById(t.target.dataset.api_id),this.$router.push("/"),this.setCityID(t.target.dataset.id)}}};const M=(0,y.Z)(Q,[["render",q],["__scopeId","data-v-0c581756"]]);var H=M,P={components:{FavoriteItem:H},computed:{...(0,j.rn)({favoriteList:t=>t.favorite.favoriteList})}};const G=(0,y.Z)(P,[["render",U],["__scopeId","data-v-63191670"]]);var R=G;const N={class:"btn"};function K(t,e,a,r,i,s){return(0,n.wg)(),(0,n.iD)("button",N,[(0,n.WI)(t.$slots,"default")])}var Y={};const J=(0,y.Z)(Y,[["render",K]]);var X=J,tt=a(6265),et=a.n(tt);function at(t){let e=t.getMinutes(),a=t.getUTCHours();return e=1==e.toString().length?"0"+e:e,a=1==a.toString().length?"0"+a:a,{minutes:e,hours:a}}function rt(t){return t.charAt(0).toUpperCase()+t.slice(1)}function nt(t){let e={23:"C",45:"СВ",68:"СВ",90:"В",113:"В",135:"ЮВ",158:"ЮВ",180:"Ю",203:"Ю",225:"ЮЗ",248:"ЮЗ",270:"З",293:"З",315:"СЗ",338:"СЗ",360:"С"},a=Object.keys(e),r=a.find((e=>t<e));return e[r]}function it(t,e,a={}){a={path:"/",...a},a.expires instanceof Date&&(a.expires=a.expires.toUTCString());let r=encodeURIComponent(t)+"="+encodeURIComponent(e);for(let n in a){r+="; "+n;let t=a[n];!0!==t&&(r+="="+t)}document.cookie=r}function st(t){let e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}function ot(t){let e=new Date(1e3*t.dt),a=["ВС","ПН","ВТ","СР","ЧТ","ПТ","СБ"],r={id:Date.now(),weekDay:a[e.getDay()],day:e.getDate(),temp:`${Math.trunc(t.temp.day)}°C`,clouds:`${t.clouds}%`,icon:`https://openweathermap.org/img/wn/${t.weather[0].icon}@2x.png`,descr:rt(t.weather[0].description)};return r}function ct(t){it(t,"",{"max-age":-1})}var ut={data(){return{isFavActive:!1}},computed:{...(0,j.rn)({isAuth:t=>t.isAuth})},components:{AppButton:X,AppFavoriteHidden:R},methods:{...(0,j.OI)({setAuth:"setAuth"}),toggleFavActive(){this.isFavActive=!this.isFavActive},logOut(){et()({method:"POST",headers:{Authorization:`Bearer ${st("authToken")}`},url:"https://front-test.academy.smartworld.team/api/api/logout"}).then((t=>{!0===t.data.success&&ct("authToken")})),this.setAuth(!1),this.$router.push("/login")}}};const dt=(0,y.Z)(ut,[["render",T],["__scopeId","data-v-2a7f653a"]]);var lt=dt,pt={components:{AppLogo:f,AppContainer:k,AppNavBar:lt}};const ht=(0,y.Z)(pt,[["render",c],["__scopeId","data-v-0070af0a"]]);var mt=ht,_t={components:{AppHeader:mt},computed:{...(0,j.rn)({isAuth:t=>t.isAuth})},methods:{...(0,j.OI)({setAuth:"setAuth"}),...(0,j.nv)({getFavorites:"favorite/getFavorites"}),checkCookie(){st("authToken")&&this.setAuth(!0)}},mounted(){this.checkCookie(),this.isAuth&&this.getFavorites()}};const vt=(0,y.Z)(_t,[["render",s]]);var yt=vt,gt=a(678);const ft={class:"city-weather"},wt={key:1,class:"loading-screen"},Ct=(0,n._)("h1",null,"Идет загрузка...",-1),Dt=(0,n.Uk)("Попробовать ещё раз");function It(t,e,a,r,i,s){const o=(0,n.up)("app-current-weather"),c=(0,n.up)("app-daily-weather"),u=(0,n.up)("app-container"),d=(0,n.up)("app-button");return(0,n.wg)(),(0,n.iD)("article",ft,[t.isDataLoaded?((0,n.wg)(),(0,n.j4)(u,{key:0,class:"city-weather__container"},{default:(0,n.w5)((()=>[(0,n.Wm)(o,{name:t.city,currentData:t.currentCityData,class:"city-weather__crnt-weather"},null,8,["name","currentData"]),(0,n.Wm)(c,{days:t.dailyWeather,class:"city-weather__daily-weather"},null,8,["days"])])),_:1})):((0,n.wg)(),(0,n.iD)("div",wt,[Ct,t.errorBtn?((0,n.wg)(),(0,n.j4)(d,{key:0,onClick:t.getCurrentLocation,style:{"margin-top":"50px"}},{default:(0,n.w5)((()=>[Dt])),_:1},8,["onClick"])):(0,n.kq)("",!0)]))])}const kt=t=>((0,n.dD)("data-v-fa4b8cfa"),t=t(),(0,n.Cn)(),t),bt={class:"current-weather"},Ft=kt((()=>(0,n._)("h1",{class:"current-weather__title"},"Погода Сегодня",-1))),At={class:"current-weather__wrapper"},Wt={class:"current-weather__city-name"},Lt={class:"current-weather__date"},$t={class:"current-weather__temp"},Bt={class:"current-weather__temp-img-wrapper"},Ot=["src"],Tt={class:"current-weather__temp-info"},zt={class:"current-weather__other-info"},St={class:"current-weather__feels-like"},xt={class:"current-weather__wind-speed-info"},Ut={class:"current-weather__wind-dir-info"},jt={class:"current-weather__pressure"},Et={class:"current-weather__humidity"};function Vt(t,e,a,r,i,s){const o=(0,n.up)("app-favorite-btn"),c=(0,n.up)("app-sun-day");return(0,n.wg)(),(0,n.iD)("div",bt,[Ft,(0,n._)("div",At,[(0,n._)("div",Wt,(0,b.zw)(a.name),1),(0,n.Wm)(o,{class:"current-weather__favorite"}),(0,n._)("div",Lt,(0,b.zw)(a.currentData.date)+" "+(0,b.zw)(a.currentData.month)+", "+(0,b.zw)(a.currentData.time),1),(0,n._)("div",$t,[(0,n._)("div",Bt,[(0,n._)("img",{class:"current-weather__img",src:a.currentData.icon,alt:"",srcset:""},null,8,Ot)]),(0,n._)("div",Tt,(0,b.zw)(a.currentData.temp),1)]),(0,n._)("div",zt,[(0,n._)("div",St,"Ощущается как "+(0,b.zw)(a.currentData.feels_like)+". "+(0,b.zw)(a.currentData.description),1),(0,n._)("div",xt,"Скорость ветра: "+(0,b.zw)(a.currentData.windSpeed),1),(0,n._)("div",Ut,"Направление: "+(0,b.zw)(a.currentData.windDir),1),(0,n._)("div",jt,"Давление: "+(0,b.zw)(a.currentData.pressure),1),(0,n._)("div",Et,"Влажность: "+(0,b.zw)(a.currentData.humidity),1)]),(0,n.Wm)(c,{sun_day:a.currentData.sun_day},null,8,["sun_day"])])])}const Zt=t=>((0,n.dD)("data-v-42ca2c73"),t=t(),(0,n.Cn)(),t),qt={class:"sun-day"},Qt=Zt((()=>(0,n._)("div",{class:"sun-day__background"},null,-1))),Mt={class:"sun-day__sunrise"},Ht=Zt((()=>(0,n._)("div",{class:"sun-day__title"},"Восход",-1))),Pt={class:"sun-day__value"},Gt=Zt((()=>(0,n._)("div",{class:"sun-day__sun"},null,-1))),Rt={class:"sun-day__sunset"},Nt=Zt((()=>(0,n._)("div",{class:"sun-day__title"},"Закат",-1))),Kt={class:"sun-day__value"};function Yt(t,e,a,r,i,s){return(0,n.wg)(),(0,n.iD)("div",qt,[Qt,(0,n._)("div",Mt,[Ht,(0,n._)("div",Pt,(0,b.zw)(a.sun_day?.sunrise),1)]),Gt,(0,n._)("div",Rt,[Nt,(0,n._)("div",Kt,(0,b.zw)(a.sun_day?.sunset),1)])])}var Jt={props:{sun_day:{type:Object}}};const Xt=(0,y.Z)(Jt,[["render",Yt],["__scopeId","data-v-42ca2c73"]]);var te=Xt;const ee={key:0,class:"favorite-btn__wrapper"},ae={key:0,class:"favorite-btn__btn"},re={key:1,class:"favorite-btn__plug"},ne=(0,n._)("span",null,"Авторизируйтесь, чтобы добавить в избранное",-1),ie=[ne];function se(t,e,a,r,i,s){return null!==t.cityID?((0,n.wg)(),(0,n.iD)("div",ee,[t.auth?((0,n.wg)(),(0,n.iD)("div",ae,[t.getIsInFavorite?((0,n.wg)(),(0,n.iD)("span",{key:1,onClick:e[1]||(e[1]=(...e)=>t.removeFromFav&&t.removeFromFav(...e)),class:"favorite-btn__text"},"Удалить из избранного")):((0,n.wg)(),(0,n.iD)("span",{key:0,onClick:e[0]||(e[0]=(...e)=>t.addToFav&&t.addToFav(...e)),class:"favorite-btn__text"},"Добавить город в избранное"))])):((0,n.wg)(),(0,n.iD)("div",re,ie))])):(0,n.kq)("",!0)}var oe={computed:{...(0,j.rn)({auth:t=>t.isAuth,cityID:t=>t.current.cityID}),...(0,j.Se)({getIsInFavorite:"favorite/getIsInFavorite"})},methods:{...(0,j.nv)({addToFav:"favorite/addToFav",removeFromFav:"favorite/removeFromFav",checkIfInFav:"favorite/checkIfInFav"})},mounted(){this.checkIfInFav()}};const ce=(0,y.Z)(oe,[["render",se]]);var ue=ce,de={components:{AppSunDay:te,AppFavoriteBtn:ue},props:{name:{type:String},currentData:{type:Object,required:!0}}};const le=(0,y.Z)(de,[["render",Vt],["__scopeId","data-v-fa4b8cfa"]]);var pe=le;const he=t=>((0,n.dD)("data-v-0b1044d5"),t=t(),(0,n.Cn)(),t),me={class:"daily-weather"},_e=he((()=>(0,n._)("h1",{class:"daily-weather__title"}," Погода на неделю ",-1))),ve={class:"daily-weather__list"};function ye(t,e,a,r,i,s){const o=(0,n.up)("app-day");return(0,n.wg)(),(0,n.iD)("div",me,[_e,(0,n._)("ul",ve,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.days,(t=>((0,n.wg)(),(0,n.j4)(o,{key:t.id,day:t},null,8,["day"])))),128))])])}const ge={class:"day"},fe={class:"day__date"},we={class:"day__num"},Ce={class:"day__month"},De={class:"day__temp-img-wrapper"},Ie=["src"],ke={class:"day__temp-info"},be={class:"day__descr"},Fe={class:"day__clouds"};function Ae(t,e,a,r,i,s){return(0,n.wg)(),(0,n.iD)("li",ge,[(0,n._)("div",fe,[(0,n._)("div",we,(0,b.zw)(a.day.day),1),(0,n._)("div",Ce,(0,b.zw)(a.day.weekDay),1)]),(0,n._)("div",De,[(0,n._)("img",{class:"day__img",src:a.day.icon,alt:"",srcset:""},null,8,Ie)]),(0,n._)("div",ke,(0,b.zw)(a.day.temp),1),(0,n._)("div",be,(0,b.zw)(a.day.descr),1),(0,n._)("div",Fe,"Облачность: "+(0,b.zw)(a.day.clouds),1)])}var We={props:{day:{type:Object,required:!0}}};const Le=(0,y.Z)(We,[["render",Ae]]);var $e=Le,Be={components:{AppDay:$e},props:{days:{type:Array,required:!0}}};const Oe=(0,y.Z)(Be,[["render",ye],["__scopeId","data-v-0b1044d5"]]);var Te=Oe,ze={components:{AppContainer:k,AppCurrentWeather:pe,AppDailyWeather:Te,AppButton:X},computed:{...(0,j.rn)({isDataLoaded:t=>t.current.isDataLoaded,lon:t=>t.current.lon,lat:t=>t.current.lat,errorBtn:t=>t.current.errorButton,city:t=>t.current.city,currentCityData:t=>t.current.currentCityData,dailyWeather:t=>t.current.dailyWeather})},methods:{...(0,j.OI)({setLon:"current/setLon",setLat:"current/setLat",setCity:"current/setCity",setCurrentCityData:"current/setCurrentCityData",setErrorButton:"current/setErrorButton",setDataLoaded:"current/setDataLoaded"}),...(0,j.nv)({getCurrentWeather:"current/getCurrentWeather",getCurrentLocation:"current/getCurrentLocation"})},mounted(){this.getCurrentLocation()}};const Se=(0,y.Z)(ze,[["render",It]]);var xe=Se;const Ue={class:"cities"},je=["model-value"],Ee={class:"cities__list"};function Ve(t,e,a,r,i,s){const o=(0,n.up)("city-item"),c=(0,n.up)("app-container");return(0,n.wg)(),(0,n.iD)("div",Ue,[(0,n.Wm)(c,{class:"cities__container"},{default:(0,n.w5)((()=>[(0,n._)("input",{"model-value":t.searchQuery,onInput:e[0]||(e[0]=(...t)=>s.onInput&&s.onInput(...t)),type:"text",class:"cities__search",placeholder:"Поиск...(англ)"},null,40,je),(0,n._)("ul",Ee,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.searchedCities,(t=>((0,n.wg)(),(0,n.j4)(o,{key:t.id,city:t},null,8,["city"])))),128))])])),_:1})])}const Ze=["data-id"],qe=["data-id"];function Qe(t,e,a,i,s,o){return(0,n.wg)(),(0,n.iD)("li",{class:"city-item",onClick:e[0]||(e[0]=(0,r.iM)(((...t)=>o.findCityByID&&o.findCityByID(...t)),["stop"])),"data-id":a.city.api_city_id},[(0,n._)("span",{class:"city-name","data-id":a.city.api_city_id},(0,b.zw)(o.toUpperCaseCityName),9,qe)],8,Ze)}var Me={props:{city:{type:Object}},computed:{toUpperCaseCityName(){return this.city.name.toUpperCase()}},methods:{...(0,j.nv)({getWeather:"current/getCurrentWeatherById"}),...(0,j.OI)({setCityID:"current/setCityID"}),findCityByID(t){this.getWeather(t.target.dataset.id),this.$router.push("/"),this.setCityID(this.city.id)}}};const He=(0,y.Z)(Me,[["render",Qe],["__scopeId","data-v-123fef5b"]]);var Pe=He,Ge={components:{AppContainer:k,CityItem:Pe},computed:{...(0,j.rn)({citesAtOnce:t=>t.cities.citesAtOnce,cities:t=>t.cities.cities,searchQuery:t=>t.cities.searchQuery}),...(0,j.Se)({searchedCities:"cities/searchedCities"})},methods:{...(0,j.OI)({setSearchQuery:"cities/setSearchQuery"}),onInput(t){let e=t.target.value;this.setSearchQuery(e)},...(0,j.nv)({loadCities:"cities/loadCities"})},mounted(){this.loadCities()}};const Re=(0,y.Z)(Ge,[["render",Ve]]);var Ne=Re;const Ke=t=>((0,n.dD)("data-v-e5922880"),t=t(),(0,n.Cn)(),t),Ye={class:"login-form__container"},Je=Ke((()=>(0,n._)("h3",{class:"login-form__title"},"Авторизация",-1))),Xe=(0,n.Uk)("Войти");function ta(t,e,a,i,s,o){const c=(0,n.up)("form-input"),u=(0,n.up)("app-button");return(0,n.wg)(),(0,n.iD)("form",{onSubmit:e[2]||(e[2]=(0,r.iM)((()=>{}),["prevent"])),class:"login-form"},[(0,n._)("div",Ye,[Je,(0,n.Wm)(c,{modelValue:s.email,"onUpdate:modelValue":e[0]||(e[0]=t=>s.email=t),class:"login-form__input",type:"email",name:"email",placeholder:"Email"},null,8,["modelValue"]),(0,n.Wm)(c,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=t=>s.password=t),class:"login-form__input",type:"password",name:"password",placeholder:"Пароль"},null,8,["modelValue"]),(0,n.Wm)(u,{onClick:o.logIn,class:"login-from__button"},{default:(0,n.w5)((()=>[Xe])),_:1},8,["onClick"])])],32)}const ea=["value"];function aa(t,e,a,r,i,s){return(0,n.wg)(),(0,n.iD)("input",{value:a.modelValue,onInput:e[0]||(e[0]=(...t)=>s.updateInput&&s.updateInput(...t)),class:"form-input"},null,40,ea)}var ra={props:{modelValue:{type:[String,Number]}},methods:{updateInput(t){this.$emit("update:modelValue",t.target.value)}}};const na=(0,y.Z)(ra,[["render",aa]]);var ia=na,sa={components:{FormInput:ia,AppButton:X},data(){return{email:null,password:null}},methods:{...(0,j.OI)({setAuth:"setAuth"}),...(0,j.nv)({loadCities:"cities/loadCities",getFavorites:"favorite/getFavorites"}),logIn(){let t={email:this.email,password:this.password};et()({method:"POST",data:t,url:"https://front-test.academy.smartworld.team/api/api/login",headers:{"Content-Type":"application/json"}}).then((t=>{let e=t.data;if("Logged"===e.message){let{token:t,expires_in:a}=e.data.authToken;it("authToken",t,{"max-age":a}),this.setAuth(!0),this.$router.push("/"),this.loadCities(),this.getFavorites()}}))}}};const oa=(0,y.Z)(sa,[["render",ta],["__scopeId","data-v-e5922880"]]);var ca=oa;const ua=t=>((0,n.dD)("data-v-f4da4a92"),t=t(),(0,n.Cn)(),t),da={class:"register-form"},la={class:"register-form__container"},pa=ua((()=>(0,n._)("h3",{class:"register-form__title"},"Регистрация",-1))),ha=(0,n.Uk)("Зарегистрироваться");function ma(t,e,a,r,i,s){const o=(0,n.up)("form-input"),c=(0,n.up)("app-button");return(0,n.wg)(),(0,n.iD)("form",da,[(0,n._)("div",la,[pa,(0,n.Wm)(o,{modelValue:i.login,"onUpdate:modelValue":e[0]||(e[0]=t=>i.login=t),class:"login-form__input",type:"text",name:"name",placeholder:"Имя пользователя"},null,8,["modelValue"]),(0,n.Wm)(o,{modelValue:i.email,"onUpdate:modelValue":e[1]||(e[1]=t=>i.email=t),class:"login-form__input",type:"email",name:"email",placeholder:"Email"},null,8,["modelValue"]),(0,n.Wm)(o,{modelValue:i.password,"onUpdate:modelValue":e[2]||(e[2]=t=>i.password=t),class:"login-form__input",type:"password",name:"password",placeholder:"Пароль"},null,8,["modelValue"]),(0,n.Wm)(o,{class:"login-form__input",type:"password",name:"confirm-password",placeholder:"Подтвердите пароль"}),(0,n.Wm)(c,{class:"login-from__button",onClick:s.postForm},{default:(0,n.w5)((()=>[ha])),_:1},8,["onClick"])])])}var _a={components:{FormInput:ia,AppButton:X},data(){return{login:null,email:null,password:null}},methods:{postForm(t){t.preventDefault();let e={name:this.login,email:this.email,password:this.password};et()({method:"POST",url:"https://front-test.academy.smartworld.team/api/api/register",data:e,headers:{"Content-Type":"application/json"}}).then((t=>{"Registered"===t.data.message&&(console.log(t.data.message),this.$router.push("/login"))}))}}};const va=(0,y.Z)(_a,[["render",ma],["__scopeId","data-v-f4da4a92"]]);var ya=va;const ga=[{path:"/",component:xe},{path:"/cities",component:Ne},{path:"/login",component:ca},{path:"/reg",component:ya}],fa=(0,gt.p7)({routes:ga,history:(0,gt.r5)()});var wa=fa;let Ca=["ЯНВ","ФЕВ","МАР","АПР","МАЙ","ИЮН","ИЮЛ","АВГ","СЕН","ОКТ","НОЯ","ДЕК"];const Da={state:()=>({isDataLoaded:!1,lon:null,lat:null,errorButton:!1,city:"",cityID:null,currentCityData:{},dailyWeather:[]}),mutations:{setLon(t,e){t.lon=(+e).toFixed(6)},setLat(t,e){t.lat=(+e).toFixed(6)},setCity(t,e){t.city=e},setCityID(t,e){t.cityID=e},setCurrentCityData(t,e){t.currentCityData=e},setErrorButton(t,e){t.errorButton=e},setDataLoaded(t,e){t.isDataLoaded=e},setDailyWeather(t,e){t.dailyWeather=e}},actions:{getCurrentLocation(t){let e={enableHighAccuracy:!0,timeout:5e3},a=e=>{1===e.code&&(alert('Пожалуйста, разрешите приложению доступ к вашему местоположению и нажмите "Попробовать ещё раз"'),t.commit("setErrorButton",!0))},r=e=>{t.commit("setErrorButton",!1),null==t.rootState.clientLong&&null==t.rootState.clientLat&&(t.rootState.clientLong=e.coords.longitude,t.rootState.clientLat=e.coords.latitude,t.commit("setLon",e.coords.longitude),t.commit("setLat",e.coords.latitude),t.dispatch("getCurrentWeather"),t.dispatch("getDailyWeather")),t.commit("setDataLoaded",!0)};navigator.geolocation.getCurrentPosition(r,a,e)},setCurrentCityData(t,e){let a=new Date(1e3*e.dt+1e3*e.timezone);t.commit("setCity",e.name.toUpperCase());let r=at(a),n=at(new Date(1e3*e.sys.sunrise+1e3*e.timezone)),i=at(new Date(1e3*e.sys.sunset+1e3*e.timezone)),s={month:Ca[a.getMonth()],date:a.getDate(),time:`${r.hours}:${r.minutes}`,temp:`${Math.trunc(e.main.temp)}°C`,windSpeed:`${e.wind.speed} м/с`,windDir:nt(e.wind.deg),cloudness:`${e.clouds.all}%`,pressure:.75*e.main.pressure+" мм.рт.ст.",humidity:`${e.main.humidity}%`,feels_like:`${Math.trunc(e.main.feels_like)}°C`,description:rt(e.weather[0].description),icon:`https://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`,sun_day:{sunrise:`${n.hours}:${n.minutes}`,sunset:`${i.hours}:${i.minutes}`}};t.commit("setCurrentCityData",s)},getDailyWeather({state:t,commit:e}){e("setDailyWeather",[]),et()({method:"GET",url:"https://api.openweathermap.org/data/2.5/onecall",params:{lat:t.lat,lon:t.lon,units:"metric",lang:"ru",exclude:"current,minutely,hourly,alerts",appid:"84bea86b6e84affc971c5ed48003ecea"}}).then((a=>{let r=a.data,n=r.daily.slice(1),i=[];for(let t of n)i.push(ot(t));e("setDailyWeather",[...t.dailyWeather,...i])}))},getCurrentWeather({state:t,dispatch:e,rootState:a}){et()({method:"GET",url:"https://api.openweathermap.org/data/2.5/weather",params:{lat:t.lat,lon:t.lon,units:"metric",lang:"ru",appid:"84bea86b6e84affc971c5ed48003ecea"}}).then((t=>{let r=t.data;a.clientCity=null==a.clientCity?r.name.toUpperCase():a.clientCity,e("setCurrentCityData",r)}))},getCurrentWeatherById({dispatch:t},e){et()({method:"GET",url:"https://api.openweathermap.org/data/2.5/weather",params:{id:e,units:"metric",lang:"ru",appid:"84bea86b6e84affc971c5ed48003ecea"}}).then((e=>{let a=e.data;t("getDailyWeather"),t("setCurrentCityData",a)}))}},namespaced:!0},Ia={state:()=>({searchQuery:"",cities:[]}),mutations:{setCities(t,e){t.cities=e},setSearchQuery(t,e){t.searchQuery=e}},getters:{searchedCities(t){return t.cities.filter((e=>e.name.toLowerCase().includes(t.searchQuery.toLowerCase())))||t.cities}},actions:{loadCities({commit:t}){let e=st("authToken");t("setSearchQuery",""),et()({method:"GET",url:"https://front-test.academy.smartworld.team/api/City/get",headers:{Authorization:`Bearer ${e}`}}).then((e=>{t("setCities",e.data.data)}))}},namespaced:!0},ka={state:()=>({isInFavorite:!1,favoriteList:[]}),getters:{getFavoriteList(t){return t.favoriteList},getIsInFavorite(t){return t.isInFavorite}},mutations:{setIsInFavorite(t,e){t.isInFavorite=e},setFavoriteList(t,e){t.favoriteList=e}},actions:{getFavorites({commit:t,dispatch:e}){et()({method:"GET",url:"https://front-test.academy.smartworld.team/api/City/getFavourite",headers:{Authorization:`Bearer ${st("authToken")}`}}).then((a=>{let r=a.data;t("setFavoriteList",r.data),e("checkIfInFav")}))},deleteCity({dispatch:t},e){let a=e.target.dataset.id;et()({method:"DELETE",url:`https://front-test.academy.smartworld.team/api/City/remove/${a}`,headers:{Authorization:`Bearer ${st("authToken")}`}}).then((()=>{t("getFavorites")}))},addToFav({rootState:t,dispatch:e}){let a=t.current.cityID;et()({method:"POST",url:`https://front-test.academy.smartworld.team/api/City/add/${a}`,headers:{Authorization:`Bearer ${st("authToken")}`}}).then((()=>{e("getFavorites")}))},removeFromFav({dispatch:t,rootState:e}){let a=e.current.cityID;et()({method:"DELETE",url:`https://front-test.academy.smartworld.team/api/City/remove/${a}`,headers:{Authorization:`Bearer ${st("authToken")}`}}).then((()=>{t("getFavorites")}))},checkIfInFav({rootState:t,commit:e,getters:a}){let r=a.getFavoriteList,n=r.find((e=>{if(e.id===t.current.cityID)return!0}));e("setIsInFavorite",!!n)}},namespaced:!0};var ba=(0,j.MT)({state:()=>({isAuth:!1,clientLong:null,clientLat:null,clientCity:null}),mutations:{setClientCity(t,e){t.clientCity=e},setAuth(t,e){t.isAuth=e}},modules:{current:Da,cities:Ia,favorite:ka}}),Fa={mounted(t,e){let a={rootMargin:"0px",threshold:1},r=t=>{t[0].isIntersecting&&e.value()},n=new IntersectionObserver(r,a);n.observe(t)}};const Aa=(0,r.ri)(yt);Aa.directive("intersection",Fa),Aa.use(ba).use(wa).mount("#app")},6949:function(t,e,a){t.exports=a.p+"img/logo.47e6efb2.png"}},e={};function a(r){var n=e[r];if(void 0!==n)return n.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,r,n,i){if(!r){var s=1/0;for(d=0;d<t.length;d++){r=t[d][0],n=t[d][1],i=t[d][2];for(var o=!0,c=0;c<r.length;c++)(!1&i||s>=i)&&Object.keys(a.O).every((function(t){return a.O[t](r[c])}))?r.splice(c--,1):(o=!1,i<s&&(s=i));if(o){t.splice(d--,1);var u=n();void 0!==u&&(e=u)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[r,n,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.p=""}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,r){var n,i,s=r[0],o=r[1],c=r[2],u=0;if(s.some((function(e){return 0!==t[e]}))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(c)var d=c(a)}for(e&&e(r);u<s.length;u++)i=s[u],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(d)},r=self["webpackChunkfourth_task"]=self["webpackChunkfourth_task"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(9935)}));r=a.O(r)})();
//# sourceMappingURL=app.35a5ad61.js.map